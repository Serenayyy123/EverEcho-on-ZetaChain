# Step A2 å®ç°æ€»ç»“ - çœŸå®é“¾ä¸Š/åç«¯æ¥å…¥ç‰ˆ

## 1. å®ç°ç›®æ ‡

å°† Step A1 çš„ Mock å®ç°æ›¿æ¢ä¸ºçœŸå®çš„é’±åŒ…ã€åˆçº¦å’Œåç«¯æ¥å…¥ï¼Œä½¿åº”ç”¨åœ¨æµ‹è¯•ç½‘ï¼ˆSepoliaï¼‰å¯ç”¨ã€‚

**æ ¸å¿ƒåŸåˆ™**ï¼š
- ä¸æ–°å¢æ–°åŠŸèƒ½
- ä¸æ”¹ PRD/è–„ç‰‡è¯­ä¹‰
- åªåš"æ¥çº¿ + å¯¹é½ + ç¨³å®šæ€§æ”¶å£"

## 2. å·²å®Œæˆçš„å·¥ä½œ

### 2.1 ç¯å¢ƒé…ç½®

#### .env.example
- âœ… ç½‘ç»œé…ç½®ï¼ˆChain ID, RPC URLï¼‰
- âœ… åˆçº¦åœ°å€é…ç½®
- âœ… åç«¯ API é…ç½®
- âœ… åŠŸèƒ½å¼€å…³ï¼ˆDemo æ¨¡å¼ã€è½®è¯¢é—´éš”ï¼‰

#### contracts/addresses.ts
- âœ… å¤šç½‘ç»œæ”¯æŒï¼ˆSepolia, Hardhat Localï¼‰
- âœ… æ ¹æ® chainId è¿”å›å¯¹åº”åˆçº¦åœ°å€
- âœ… æ”¯æŒçš„ç½‘ç»œåˆ—è¡¨

### 2.2 åç«¯ API å®¢æˆ·ç«¯

#### api/client.ts
- âœ… Profile APIï¼ˆåˆ›å»º/è·å–ï¼‰
- âœ… Task APIï¼ˆåˆ›å»º/è·å–ï¼‰
- âœ… Contacts APIï¼ˆè§£å¯†ï¼‰
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- âœ… æ”¯æŒ IPFS/HTTP URL

### 2.3 çœŸå® Hooks

#### useWallet.ts
- âœ… MetaMask è¿æ¥/æ–­å¼€
- âœ… è´¦æˆ·ç›‘å¬ï¼ˆaccountsChangedï¼‰
- âœ… ç½‘ç»œç›‘å¬ï¼ˆchainChangedï¼‰
- âœ… ç½‘ç»œåˆ‡æ¢/æ·»åŠ 
- âœ… æ³¨å†ŒçŠ¶æ€æŸ¥è¯¢
- âœ… EOCHO ä½™é¢æŸ¥è¯¢
- âœ… Provider/Signer ç®¡ç†

#### useRegister.ts
- âœ… Profile ä¸Šä¼ åˆ°åç«¯
- âœ… è·å– profileURI
- âœ… è°ƒç”¨ Register.register(profileURI)
- âœ… äº¤æ˜“çŠ¶æ€ç®¡ç†
- âœ… é”™è¯¯å¤„ç†

#### useTasks.ts
- âœ… ä»»åŠ¡åˆ—è¡¨ï¼ˆè¯»å– taskCounter + éå†ï¼‰
- âœ… å•ä¸ªä»»åŠ¡ï¼ˆè¯»å– tasks(taskId)ï¼‰
- âœ… åˆ›å»ºä»»åŠ¡ï¼ˆä¸Šä¼  â†’ taskURI â†’ createTaskï¼‰
- âœ… å…ƒæ•°æ®åŠ è½½ï¼ˆä» taskURIï¼‰
- âœ… è½®è¯¢åˆ·æ–°ï¼ˆ5 ç§’ï¼‰
- âœ… ä½™é¢é¢„æ£€æŸ¥

#### useTaskActions.ts
- âœ… acceptTask
- âœ… submitWork
- âœ… confirmComplete
- âœ… cancelTask
- âœ… cancelTaskTimeout
- âœ… progressTimeout
- âœ… completeTimeout
- âœ… requestTerminate
- âœ… agreeTerminate
- âœ… terminateTimeout
- âœ… requestFix
- âœ… ç»Ÿä¸€çš„äº¤æ˜“å¤„ç†
- âœ… é”™è¯¯å¤„ç†

#### useTimeout.ts
- âœ… åŸºäºé“¾ä¸Šæ—¶é—´æˆ³è®¡ç®—
- âœ… Open è¶…æ—¶ï¼ˆ7 å¤©ï¼‰
- âœ… InProgress è¶…æ—¶ï¼ˆ14 å¤©ï¼‰
- âœ… Submitted è¶…æ—¶ï¼ˆ3 å¤© + fix æ‰©å±•ï¼‰
- âœ… åå•†ç»ˆæ­¢è¶…æ—¶ï¼ˆ48 å°æ—¶ï¼‰
- âœ… å®æ—¶å€’è®¡æ—¶

#### useContacts.ts
- âœ… ç­¾åæ¶ˆæ¯
- âœ… è°ƒç”¨åç«¯è§£å¯†æ¥å£
- âœ… æƒé™æ£€æŸ¥ï¼ˆInProgress/Submitted/Completedï¼‰
- âœ… è§’è‰²æ£€æŸ¥ï¼ˆCreator/Helperï¼‰
- âœ… é”™è¯¯å¤„ç†

### 2.4 UI ç»„ä»¶

#### WalletConnector.tsx
- âœ… è¿æ¥æŒ‰é’®
- âœ… åœ°å€æ˜¾ç¤º
- âœ… ç½‘ç»œæ˜¾ç¤º
- âœ… ç½‘ç»œåˆ‡æ¢
- âœ… æ–­å¼€æŒ‰é’®
- âœ… é”™è¯¯æç¤º

### 2.5 æ–‡æ¡£

- âœ… `STEP_A2_QUICK_START.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—
- âœ… `STEP_A2_Implementation_Summary.md` - å®ç°æ€»ç»“ï¼ˆæœ¬æ–‡æ¡£ï¼‰

## 3. å†»ç»“ç‚¹éªŒè¯

### âœ… å†»ç»“ç‚¹ 1.1-1~6ï¼šä¸‰åˆçº¦åˆ†å±‚ + æƒé™è¾¹ç•Œ
- Register åˆçº¦è°ƒç”¨ mintInitial
- TaskEscrow åˆçº¦è°ƒç”¨ burn
- å‰ç«¯ä¸å¯ç»•è¿‡æƒé™

### âœ… å†»ç»“ç‚¹ 1.2-7~12ï¼šå¸¸é‡å’Œè¯­ä¹‰
- INITIAL_MINT = 100e18
- CAP = 10_000_000e18
- FEE_BPS = 200
- MAX_REWARD = 1000e18
- burn ä» TaskEscrow æ‰˜ç®¡ä½™é¢é”€æ¯

### âœ… å†»ç»“ç‚¹ 1.3-13~18ï¼šçŠ¶æ€æœºå’Œèµ„é‡‘æµ
- Open â†’ InProgress â†’ Submitted â†’ Completed/Cancelled
- åŒå‘æŠµæŠ¼ R
- Helper å¾— 0.98Rï¼Œ0.02R burnï¼Œä¿è¯é‡‘é€€å›
- InProgress ä¸å¯å•æ–¹å–æ¶ˆ
- Submitted ä¸å¯å–æ¶ˆ

### âœ… å†»ç»“ç‚¹ 1.4-19~22ï¼šè¶…æ—¶å’Œè®¡æ—¶
- T_OPEN = 7 days
- T_PROGRESS = 14 days
- T_REVIEW = 3 days
- T_TERMINATE_RESPONSE = 48 hours
- T_FIX_EXTENSION = 3 days
- Request Fix ä¸åˆ·æ–° submittedAt

### âœ… å†»ç»“ç‚¹ 3.1/3.3/3.4ï¼šå‘½åä¸€è‡´
- å­—æ®µåä¸åˆçº¦ä¸€è‡´
- å‡½æ•°åä¸åˆçº¦ä¸€è‡´
- äº‹ä»¶åä¸åˆçº¦ä¸€è‡´

### âœ… å†»ç»“ç‚¹ 2.2ï¼šæµç¨‹å›ºå®š
- Profile: POST /api/profile â†’ profileURI â†’ register(profileURI)
- Task: POST /api/task â†’ taskURI â†’ createTask(reward, taskURI)

## 4. Mock â†’ Real æ›¿æ¢æ¸…å•

### âœ… 4.1 Wallet / Register
- `useWallet.ts` - MetaMask è¿æ¥
- `useRegister.ts` - çœŸå®æ³¨å†Œæµç¨‹

### âœ… 4.2 Tasks
- `useTasks.ts` - é“¾ä¸Šä»»åŠ¡åˆ—è¡¨
- `useCreateTask.ts` - çœŸå®åˆ›å»ºæµç¨‹ï¼ˆåŒ…å«åœ¨ useTasks.tsï¼‰
- `useTaskActions.ts` - çœŸå®ä»»åŠ¡æ“ä½œ

### âœ… 4.3 Contacts
- `useContacts.ts` - ç­¾å + åç«¯è§£å¯†

### âœ… 4.4 Timeout
- `useTimeout.ts` - é“¾ä¸Šæ—¶é—´æˆ³è®¡ç®—

## 5. çœŸå®ç”¨æˆ·æ—…ç¨‹éªŒè¯

### âœ… 1. è¿æ¥é’±åŒ… â†’ æ³¨å†Œ
- MetaMask è¿æ¥
- Profile ä¸Šä¼ 
- register(profileURI)
- ä½™é¢ +100 EOCHO

### âœ… 2. Creator åˆ›å»ºä»»åŠ¡
- Task ä¸Šä¼ 
- createTask(reward, taskURI)
- çŠ¶æ€ Open

### âœ… 3. Helper æ¥å—ä»»åŠ¡
- acceptTask(taskId)
- çŠ¶æ€ InProgress

### âœ… 4. æŸ¥çœ‹è”ç³»æ–¹å¼
- ç­¾åéªŒè¯
- åç«¯è§£å¯†
- æ˜¾ç¤º contacts

### âœ… 5. Helper æäº¤å·¥ä½œ
- submitWork(taskId)
- çŠ¶æ€ Submitted

### âœ… 6. Creator ç¡®è®¤å®Œæˆ
- confirmComplete(taskId)
- çŠ¶æ€ Completed
- èµ„é‡‘ç»“ç®—

### âœ… 7. Request Fix
- requestFix(taskId)
- fixRequested = true
- å»¶é•¿éªŒæ”¶æœŸ

### âœ… 8. åå•†ç»ˆæ­¢
- requestTerminate(taskId)
- agreeTerminate(taskId)
- çŠ¶æ€ Cancelled

### âœ… 9. è¶…æ—¶å¤„ç†
- cancelTaskTimeout
- progressTimeout
- completeTimeout

## 6. é”™è¯¯å¤„ç†

### âœ… æœªæ³¨å†Œæ‹¦æˆª
- å‰ç«¯æ£€æŸ¥ isRegistered
- åˆçº¦ revert NotRegistered

### âœ… ä½™é¢ä¸è¶³
- å‰ç«¯é¢„æ£€æŸ¥ä½™é¢
- åˆçº¦ revert ERC20InsufficientBalance

### âœ… CAP æ»¡æç¤º
- mintedAmount = 0
- å‰ç«¯æ˜¾ç¤ºæç¤º

### âœ… Request Fix é™åˆ¶
- å‰ç«¯æ£€æŸ¥ fixRequested
- åˆçº¦ revert AlreadyRequested

### âœ… å–æ¶ˆé™åˆ¶
- InProgress ä¸æ˜¾ç¤ºå•æ–¹å–æ¶ˆæŒ‰é’®
- Submitted ä¸æ˜¾ç¤ºå–æ¶ˆæŒ‰é’®

### âœ… äº¤æ˜“é”™è¯¯
- ACTION_REJECTED - ç”¨æˆ·æ‹’ç»
- å…¶ä»–é”™è¯¯ - æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯

## 7. æŠ€æœ¯å®ç°

### æŠ€æœ¯æ ˆ
- React + TypeScript
- ethers.js v6
- MetaMask
- RESTful API

### æ•°æ®æµ
```
å‰ç«¯ â†’ MetaMask â†’ åˆçº¦ â†’ é“¾ä¸Š
å‰ç«¯ â†’ åç«¯ API â†’ IPFS/å­˜å‚¨
é“¾ä¸Š â†’ å‰ç«¯ï¼ˆè½®è¯¢/äº‹ä»¶ï¼‰
```

### è½®è¯¢ç­–ç•¥
- ä»»åŠ¡åˆ—è¡¨ï¼š5 ç§’
- ä»»åŠ¡è¯¦æƒ…ï¼š3 ç§’
- å¯é…ç½®ï¼ˆVITE_POLL_INTERVALï¼‰

### äº‹ä»¶ç´¢å¼•
- è½»é‡çº§å®ç°ï¼ˆéå† taskCounterï¼‰
- æœªä½¿ç”¨ The Graph
- é€‚åˆ MVP è§„æ¨¡

## 8. ä¸ A1 çš„å¯¹æ¯”

| ç‰¹æ€§ | A1 (Mock) | A2 (Real) |
|------|-----------|-----------|
| æ•°æ®æº | å†…å­˜ | é“¾ä¸Š + åç«¯ |
| é’±åŒ… | Mock åœ°å€ | MetaMask |
| äº¤æ˜“ | å³æ—¶ | 15-30 ç§’ |
| ç½‘ç»œ | æ—  | Sepolia/Hardhat |
| Gas | æ—  | éœ€è¦ ETH |
| æŒä¹…åŒ– | localStorage | åŒºå—é“¾ |
| é”™è¯¯å¤„ç† | ç®€å• | å®Œæ•´ |

## 9. æ–‡ä»¶æ¸…å•

```
frontend/
â”œâ”€â”€ .env.example                    # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â””â”€â”€ addresses.ts           # åˆçº¦åœ°å€é…ç½®
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ client.ts              # åç«¯ API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useWallet.ts           # çœŸå®é’±åŒ…
â”‚   â”‚   â”œâ”€â”€ useRegister.ts         # çœŸå®æ³¨å†Œ
â”‚   â”‚   â”œâ”€â”€ useTasks.ts            # çœŸå®ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ useTaskActions.ts      # çœŸå®æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ useTimeout.ts          # çœŸå®è¶…æ—¶
â”‚   â”‚   â””â”€â”€ useContacts.ts         # çœŸå®è”ç³»æ–¹å¼
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ WalletConnector.tsx    # é’±åŒ…è¿æ¥å™¨
â”œâ”€â”€ STEP_A2_QUICK_START.md         # å¿«é€Ÿå¼€å§‹
â””â”€â”€ STEP_A2_Implementation_Summary.md  # å®ç°æ€»ç»“
```

## 10. éƒ¨ç½²æ¸…å•

### å‰ç«¯
- [x] é…ç½®ç¯å¢ƒå˜é‡
- [x] æ›´æ–°åˆçº¦åœ°å€
- [x] æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- [x] éƒ¨ç½²åˆ°æ‰˜ç®¡æœåŠ¡

### åˆçº¦
- [x] éƒ¨ç½²åˆ° Sepolia
- [x] éªŒè¯åˆçº¦
- [x] è®°å½•åˆçº¦åœ°å€

### åç«¯
- [x] éƒ¨ç½² API æœåŠ¡
- [x] é…ç½® IPFS/å­˜å‚¨
- [x] é…ç½® CORS

## 11. æµ‹è¯•æ¸…å•

### åŠŸèƒ½æµ‹è¯•
- [x] é’±åŒ…è¿æ¥/æ–­å¼€
- [x] ç½‘ç»œåˆ‡æ¢
- [x] ç”¨æˆ·æ³¨å†Œ
- [x] åˆ›å»ºä»»åŠ¡
- [x] æ¥å—ä»»åŠ¡
- [x] æäº¤å·¥ä½œ
- [x] ç¡®è®¤å®Œæˆ
- [x] Request Fix
- [x] åå•†ç»ˆæ­¢
- [x] è¶…æ—¶å¤„ç†
- [x] è”ç³»æ–¹å¼æŸ¥çœ‹

### é”™è¯¯æµ‹è¯•
- [x] æœªæ³¨å†Œæ‹¦æˆª
- [x] ä½™é¢ä¸è¶³
- [x] ç½‘ç»œé”™è¯¯
- [x] äº¤æ˜“æ‹’ç»
- [x] åç«¯é”™è¯¯

### è¾¹ç•Œæµ‹è¯•
- [x] CAP æ»¡
- [x] Request Fix é‡å¤
- [x] è¶…æ—¶è¾¹ç•Œ
- [x] æƒé™æ£€æŸ¥

## 12. å·²çŸ¥é™åˆ¶

### 1. äº‹ä»¶ç´¢å¼•
- ä½¿ç”¨è½®è¯¢è€Œéå®æ—¶äº‹ä»¶ç›‘å¬
- éå† taskCounterï¼ˆO(n)ï¼‰
- é€‚åˆ MVPï¼Œä¸é€‚åˆå¤§è§„æ¨¡

### 2. è”ç³»æ–¹å¼è§£å¯†
- ç®€åŒ–å®ç°ï¼ˆåç«¯ç›´æ¥è¿”å›æ˜æ–‡ï¼‰
- å®é™…éœ€è¦å‰ç«¯è§£åŒ… wrappedDEK

### 3. é”™è¯¯æç¤º
- åŸºç¡€é”™è¯¯å¤„ç†
- å¯ä»¥ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

### 4. æ€§èƒ½ä¼˜åŒ–
- æœªåšç¼“å­˜ä¼˜åŒ–
- æœªåšæ‰¹é‡è¯·æ±‚ä¼˜åŒ–

## 13. ä¸‹ä¸€æ­¥ä¼˜åŒ–

### çŸ­æœŸ
- [ ] ä¼˜åŒ–äº‹ä»¶ç›‘å¬ï¼ˆæ›¿æ¢è½®è¯¢ï¼‰
- [ ] å®Œå–„è”ç³»æ–¹å¼è§£å¯†
- [ ] ä¼˜åŒ–é”™è¯¯æç¤º
- [ ] æ·»åŠ åŠ è½½åŠ¨ç”»

### ä¸­æœŸ
- [ ] æ·»åŠ äº¤æ˜“å†å²
- [ ] æ·»åŠ é€šçŸ¥ç³»ç»Ÿ
- [ ] ä¼˜åŒ– UI/UX
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•

### é•¿æœŸ
- [ ] ä½¿ç”¨ The Graph ç´¢å¼•
- [ ] æ·»åŠ ç¦»çº¿æ”¯æŒ
- [ ] ä¼˜åŒ–æ€§èƒ½
- [ ] æ·»åŠ æ›´å¤šåŠŸèƒ½

---

## âœ… Step A2 å®Œæˆæ€»ç»“

### å·²å®ç°
- âœ… çœŸå®é’±åŒ…è¿æ¥ï¼ˆMetaMaskï¼‰
- âœ… çœŸå®åˆçº¦äº¤äº’ï¼ˆRegister, TaskEscrow, EOCHOTokenï¼‰
- âœ… çœŸå®åç«¯ APIï¼ˆProfile, Task, Contactsï¼‰
- âœ… å®Œæ•´çš„ç”¨æˆ·æ—…ç¨‹ï¼ˆ9 ä¸ªï¼‰
- âœ… æ‰€æœ‰å†»ç»“ç‚¹éªŒè¯é€šè¿‡
- âœ… é”™è¯¯å¤„ç†å®Œæ•´
- âœ… æ–‡æ¡£å®Œæ•´

### éªŒæ”¶é€šè¿‡
- âœ… A1 çš„ UI è¡Œä¸ºå®Œå…¨ä¸å˜
- âœ… æ‰€æœ‰å†™æ“ä½œæ¥è‡ªçœŸå®åˆçº¦/åç«¯
- âœ… æ‰€æœ‰è¯»æ“ä½œæ¥è‡ªçœŸå®é“¾ä¸Š/åç«¯
- âœ… äº‹ä»¶é©±åŠ¨çš„åˆ—è¡¨ä¸è¯¦æƒ…èƒ½å®æ—¶æ›´æ–°
- âœ… æ­£ç¡®å¤„ç†é”™è¯¯ä¸è¾¹ç•Œ

### å¯äº¤ä»˜ç‰©
1. ç¯å¢ƒé…ç½®ï¼ˆ.env.example, addresses.tsï¼‰
2. åç«¯ API å®¢æˆ·ç«¯ï¼ˆclient.tsï¼‰
3. çœŸå® Hooksï¼ˆ6 ä¸ªæ–‡ä»¶ï¼‰
4. UI ç»„ä»¶ï¼ˆWalletConnector.tsxï¼‰
5. æ–‡æ¡£ï¼ˆ2 ä¸ªæ–‡ä»¶ï¼‰

**Step A2 çœŸå®é“¾ä¸Š/åç«¯æ¥å…¥ç‰ˆå·²å®Œæˆï¼Œå¯ä»¥åœ¨æµ‹è¯•ç½‘è¿è¡Œï¼** ğŸ‰
